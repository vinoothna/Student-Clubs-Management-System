<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp"
    crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
    crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'CREW/style.css' %}">
  <title>A11 Frontend</title>
  <style>
    select {
      font-family: 'FontAwesome', 'Second Font name';
    }
    .upload-btn-wrapper {
      position: relative;
      overflow: hidden;
      display: inline-block;
      
    }
    .upload-btn-wrapper input[type=file] {
      position: absolute;
      left: 0;
      top: 0;
      opacity: 0;
    }
  </style>
</head>

<body>
  <nav class="navbar fixed-top navbar-expand-sm navbar-dark bg-dark p-2">
    <div class="container">
      <!-- CHANGE THE HREFS -->
      <a href="/Super_Admin/{{user}}" class="navbar-brand">
        <img src="https://upload.wikimedia.org/wikipedia/en/thumb/4/49/IIIT_Sri_City_Logo.png/220px-IIIT_Sri_City_Logo.png" style="height: 60px;width: 60px">&nbsp;Student Club Management System
      </a>
      <button class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarCollapse">
        
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a href="/Super_Admin/{{user}}" class="nav-link">
              <i class="fas fa-home"></i> Home
            </a>
          </li>
          
          <li class="nav-item">
            <a href="/admin_profile/{{user}}" class="nav-link">
              <i class="fas fa-user"></i> {{user.user_name}}
            </a>
          </li>
          <li class="nav-item">
            <a href="/" class="nav-link">
              <i class="fas fa-user-times"></i> Logout
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- ACTIONS -->
    <section id="actions" class="py-4 mb-4 bg-dark fixed-top" style="margin-top: 75px">
      <div class="container">
        <div class="row">
          <div class="col-md-2">
            <a href="#" class="btn btn-primary btn-block" data-toggle="modal" data-target="#addClubModal" >
               Add a Club
            </a>
          </div>
          <div class="col-md-2">
            <a href="#" class="btn btn-success btn-block" data-toggle="modal" data-target="#removeClubModal">
              Remove a Club
            </a>
          </div>
          <div class="col-md-2 text-white">
            <a href="#" class="btn btn-warning btn-block" data-toggle="modal" data-target="#conductPollModal">
              Conduct Polls
            </a>
          </div>
          <div class="col-md-2">
            <a href="#" class="btn btn-danger btn-block" data-toggle="modal" data-target="#addPostModal">
              Upload Post
            </a>
          </div>
          <div class="col-md-2">
            <a href="#" class="btn btn-info btn-block" data-toggle="modal" data-target="#orgEventModal">
              Organize Event
            </a>
          </div>
          <div class="col-md-2">
            <a href="#" class="btn btn-light btn-block" data-toggle="modal" data-target="#notificationModal">
              <i class="fas fa-bell"></i> &nbsp;Notifications
            </a>
          </div>

        </div>
      </div>
    </section>

  <!-- POSTS -->
  <section id="posts" style="margin-top: 175px">
    <div class="container">
      <div class="row">
        <div class="col-md-9"  style="background-color: rgba(0,0,0,0.1)">
          <div class="card">
          </div>
        </div>
        <div class="col-md-3">
          <div class="card text-center bg-primary text-white mb-3 flash_card" >
            <div class="card-body">
              <h5>Clubs</h5>
              <h4 class="display-6">
                <i class="fas fa-users"></i> {{clubs_no}}
              </h4>
              <a href="/all_clubs/{{usr}}" class="btn btn-outline-light btn-sm">View</a>
            </div>
          </div>

          <div class="card text-center bg-success text-white mb-3 flash_card">
            <div class="card-body">
              <h5>Events</h5>
              <h4 class="display-6">
                <i class="fas fa-folder"></i> {{events_count}}
              </h4>
              <a href="/club_events_admin/{{usr}}" class="btn btn-outline-light btn-sm">View</a>
            </div>
          </div>

          <div class="card text-center bg-warning text-white mb-3 flash_card">
            <div class="card-body">
              <h5>My Posts</h5>
              <h4 class="display-6">
                <i class="fas fa-pencil-alt"></i> {{myposts_count}}
              </h4>
              <a href="/super_admin_posts/{{usr}}" class="btn btn-outline-light btn-sm">View</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
    <footer id="main-footer" class="bg-dark text-white mt-5 p-1 fixed-bottom">
      <div class="container">
        <div class="row">
          <div class="col">
            <h6 class="text-center">
              Copyright &copy;
              <span id="year"></span>
              Student Club Management System
            </h6>
          </div>
        </div>
      </div>
    </footer>

  <!-- MODALS -->

    <!-- ADD CLUB MODAL -->
      <div class="modal fade" id="addClubModal">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header bg-primary text-white">
              <h5 class="modal-title">Add a Club</h5>
              <button class="close" data-dismiss="modal">
                <span>&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form action="{% url 'add_club' %}" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="form-group">
                  <label for="title">Club Name</label>
                  <input type="text" class="form-control" name="club_name">
                </div>
                <div class="form-group">
                  <label for="title">Description</label>
                  <textarea class="form-control" rows="5" id="comment" name="description"></textarea>
                </div>
                <div class="form-group">
                  <label for="image">T&amp;C Document </label>
                  <div class="custom-file">
                    <input type="file" class="custom-file-input" id="image" name="tc_doc">
                    <label for="image" class="custom-file-label">--Choose File--</label>
                  </div>
                  <small class="form-text text-muted">Max Size 3mb</small>
                </div>
                <div class="form-group">
                  <label for="image">Icon </label>
                  <div class="custom-file">
                    <input type="file" class="custom-file-input" id="image" name="club_icon">
                    <label for="image" class="custom-file-label">--Choose Image--</label>
                  </div>
                  <small class="form-text text-muted">Max Size 3mb</small>
                  <input type="number" value="{{user.id}}" name="sa_id" style="display: none">
                  <input type="submit" class="btn btn-primary" value="Add">
                </div>
              </form>
            </div>
            
          </div>
        </div>
      </div>

    <!-- REMOVE CLUB MODAL -->
      <div class="modal fade" id="removeClubModal">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header bg-success text-white">
              <h5 class="modal-title">Remove a Club</h5>
              <button class="close" data-dismiss="modal">
                <span>&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form action="{% url 'remove_club' %}" method="POST">
                {% csrf_token %}
                <div class="form-group">
                  <label for="category">Club</label>
                  <select class="form-control" name = "club_removed" required>                        
                          {% for j in all_clubs %} 
                            {% if j.club_active_status == True %}                           
                              <option value="{{j.club_name}}">{{j.club_name}}</option>
                            {% endif %}                            
                          {% endfor %}                       
                  </select>
                  <input type="number" value="{{user.id}}" name="sa_id" style="display: none">
                  <input type="submit" class="btn btn-success" value="Remove" style="align-items: right ">
                </div>
                
              </form>
            </div>
            
          </div>
        </div>
      </div>

    <!-- ADD POST MODAL -->
        <div class="modal fade" id="addPostModal">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header bg-danger text-white">
                <h5 class="modal-title">Upload Post</h5>
                <button class="close" data-dismiss="modal">
                  <span>&times;</span>
                </button>
              </div>
              <div class="modal-body">
                {% csrf_token %}
                <form action="{% url 'create_post' %}" method="POST" enctype="multipart/form-data"> 
                  <div class="form-group">
                    <label for="title" >Title</label>
                    <input type="text" name='post_title' class="form-control">
                  </div>
                  <div class="form-group">
                    <label for="category">Club</label>
                    {% csrf_token %}
                    <select class="form-control" name="Club">
                      {% for i in clubs_joined %}
                        {% for j in clubs %}
                          {% if i == j.id %}
                            <option value="{{j.club_name}}">{{j.club_name}}</option>
                          {% endif %}
                        {% endfor %}
                      {% endfor %}
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="image">Choose File</label>
                    <div class="custom-file">
                      <input type="file" class="custom-file-input" id="image" name="File" multiple>
                      <label for="image" class="custom-file-label">--File--</label>
                    </div>
                    <small class="form-text text-muted">Max Size 3mb</small>
                  </div>
                  <div class="form-group">
                    <label for="body">Content</label>
                    <textarea name="content" class="form-control"></textarea>
                  </div>
                  <input type="number" value="{{user.id}}" style="display:none" name="sa_id">
                  <input type="submit" value="Post" class="btn btn-danger btn-block">
                </form>
              </div>
            </div>
          </div>
        </div>

    <!-- CONDUCT POLL MODAL -->
      <div class="modal fade" id="conductPollModal">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header bg-warning text-white">
                <h5 class="modal-title">Conduct Poll</h5>
                <button class="close" data-dismiss="modal">
                  <span>&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <form action="{% url 'conduct_poll' %}" method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="form-group">
                      <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text">Title</span>
                        </div>
                        <input type="text" class="form-control" placeholder="Enter the title" name="poll_title">
                      </div>

                      <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text">Description</span>
                        </div>
                        <textarea class="form-control" placeholder="Poll description" name="poll_description"></textarea>
                      </div>


                      <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text">Start DateTime</span>
                        </div>
                        <input type="datetime-local" class="form-control" name="poll_start">
                      </div>

                      <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text">End DateTime&nbsp;</span>
                        </div>
                        <input type="datetime-local" class="form-control" name="poll_end">
                      </div>

                      <div class="input-group mb-3">
                        <div class="container-fluid row" >
                          <div class="col-md-10 options_space" >
                            
                            <div class="input-group mb-3 option" id="option1">
                              <input type="text" class="form-control" name="opt1_title" placeholder="opt1_title">
                              <div class="upload-btn-wrapper btn btn-warning">
                                <i class="far fa-image"></i>
                                
                                  <input type="file" id="image" name="opt1_img">
                                
                              </div>
                            </div>
                          
                          </div>
                          <div class="col-md-2">   
                            <select class="form-control" name="pollOption_type" style="width:64px;">
                              <option value="Multiple">&#xf046;</option>
                              <option value="Single">&#xf192;</option>
                            </select>
                            <a class="btn btn-light" id="add_poll_option">
                              <i class="fas fa-plus"></i>
                            </a>
                            <a class="btn btn-light" id="remove_poll_option">
                              <i class="fas fa-minus"></i>
                            </a>
                          </div>

                        </div>
                      </div>
                    </div>
                    <div class="modal-footer">
                      <input type="submit" class="btn btn-warning" value="Conduct">
                    </div>
                    <input type="number" name="no_of_options" style="display:none;" value="1" id="no_of_options">
                    <input type="number" name="sa_id" style="display:none;" value="{{user.id}}">
                </form>
                
              </div>
              
            </div>
          </div>
        </div>

    <!-- ORGANIZE EVENT  MODAL -->
      <div class="modal fade" id="orgEventModal">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header bg-info text-white">
              <h5 class="modal-title">Organize Event</h5>
              <button class="close" data-dismiss="modal">
                <span>&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form>
                <div class="input-group mb-3">
                  <div class="input-group-prepend">
                    <span class="input-group-text">Title</span>
                  </div>
                  <input type="text" class="form-control" placeholder="Enter the title">
                </div>
                <div class="form-group">
                  <textarea name="editor1" class="form-control" placeholder="Description"></textarea>
                </div>
                <div class="input-group mb-3">
                  <div class="input-group-prepend">
                    <span class="input-group-text">Start DateTime</span>
                  </div>
                  <input type="datetime-local" class="form-control" name="">
                </div>
                <div class="input-group mb-3">
                  <div class="input-group-prepend">
                    <span class="input-group-text">End DateTime&nbsp;</span>
                  </div>
                  <input type="datetime-local" class="form-control" name="">
                </div>
                <div class="input-group mb-3">
                  <div class="input-group-prepend">
                    <span class="input-group-text">Room No.&nbsp;</span>
                  </div>
                  <select class="form-control">
                    <option value="">101</option>
                    <option value="">103</option>
                    <option value="">105</option>
                    <option value="">107</option>
                    <option value="">113</option>
                    <option value="">115</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="image">Choose File</label>
                  <div class="custom-file">
                    <input type="file" class="custom-file-input" id="image">
                    <label for="image" class="custom-file-label">--File--</label>
                  </div>
                  <small class="form-text text-muted">Max Size 3mb</small>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button class="btn btn-info" data-target="#eventDescriptionModal" data-toggle="modal" data-dismiss="modal">Organize</button>
            </div>
          </div>
        </div>
      </div>

    <!-- NOTIFICATION MODAL -->
        <div class="modal fade" id="notificationModal">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header bg-dark text-white">
                <h5 class="modal-title">Notifications</h5>
               
                <form action="{% url 'notifications_seen' %}" method="POST" >
                  {% csrf_token %}
                  <input type="number" name="sa_id" value="{{user.id}}" style="display:none">
                  <input type="submit" class="close" value="&times;">
                </form>
              </div>
                
              <div class="modal-body">
                <h5> New </h5>
                <hr>
                <br>
                {% for notif in new_notifications %}
                  <div class="card">
                    <div class="card-body">
                      <button class="close">
                        <i class="fas fa-trash"></i>
                      </button>
                      <h5 class="card-title">{{notif.notification_content}}</h5>
                      <p class="card-text">{{notif.notification_datetime}}</p>
                    </div>
                  </div>
                  <br>
                {% endfor %}
                <h5> Earlier </h5>
                <hr>
                {% for notif in old_notifications %}
                  <div class="card">
                    <div class="card-body">
                      <button class="close">
                        <i class="fas fa-trash"></i>
                      </button>
                      <h5 class="card-title">{{notif.notification_content}}</h5>
                      <p class="card-text">{{notif.notification_datetime}}</p>
                    </div>
                  </div>
                  <br>
                {% endfor %}
              </div>
            </div>
          </div>
        </div>

  

  <script src="http://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
    crossorigin="anonymous"></script>
  

  <script>
     
    // Add options to the polls 
    $('#add_poll_option').click(function(){
      var id = ($('.option').length + 1).toString();
      $('.options_space').append('<div class="input-group mb-3 option" id="option'+id+'"><input type="text" class="form-control" name="opt'+id+'_title" placeholder="option'+id+'"><div class="upload-btn-wrapper btn btn-warning"><i class="far fa-image"></i><input type="file" name="opt'+id+'_img" ></div></div>');
      $('#no_of_options').val(id);
    });

    // Remove Options
    $('#remove_poll_option').click(function(){
      var id = ($('.option').length).toString();
      var total_options = ($('.option').length - 1).toString(); 
      $('#no_of_options').val(total_options);
      $('#option'+id).remove();
    });


    // Get the current year for the copyright
    $('#year').text(new Date().getFullYear());
    
    $('.close').click(function(){
      var $target = $(this).parents('.card');
      $target.hide('slow', function(){ $target.remove(); });
    })
  </script>
</body>

</html>
